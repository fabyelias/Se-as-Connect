<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Se√±as Connect</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
    <!-- Pantalla de carga inicial -->
    <div id="loading-screen" class="loading-screen">
        <div class="spinner"></div>
        <p id="loading-status">Cargando aplicaci√≥n...</p>
    </div>

    <!-- Banner para desbloquear audio en m√≥viles -->
    <div id="audio-unlock-banner" class="audio-unlock-banner hidden">
        <p>Para escuchar la traducci√≥n, necesitamos que actives el audio.</p>
        <button id="btn-unlock-audio" class="btn btn-primary">Activar Audio</button>
    </div>

    <!-- Contenido principal de la aplicaci√≥n -->
    <div id="app" class="app-container hidden">
        <header class="app-header">
            <h1><img src="assets/logo.png" alt="Se√±as Connect Logo" class="logo"> SE√ëAS CONNECT</h1>
            <div class="accessibility-controls">
                <button id="btn-contrast" class="btn-icon" title="Alto Contraste (Alt+C)">
                    <img src="assets/icons/contrast.svg" alt="Alto Contraste">
                </button>
                <button id="btn-font-size" class="btn-icon" title="Aumentar Tama√±o de Fuente (Alt+F)">
                    <img src="assets/icons/font-size.svg" alt="Aumentar Tama√±o de Fuente">
                </button>
                <button id="btn-fullscreen" class="btn-icon" title="Pantalla Completa (Alt+Enter)">
                    <img src="assets/icons/fullscreen.svg" alt="Pantalla Completa">
                </button>
            </div>
        </header>

        <!-- √Årea principal dividida en dos modos -->
        <main class="main-content">
            <!-- Panel izquierdo: Modo Se√±as (Comunicaci√≥n por se√±as) -->
            <section class="panel panel-signs" id="panel-signs">
                <div class="panel-header">
                    <h2>üëê Lengua de Se√±as ‚Üí Texto/Audio</h2>
                    <p class="panel-subtitle">HAGA LAS SE√ëAS</p>
                </div>

                <div class="camera-container">
                    <video id="video-signs" class="camera-video" autoplay playsinline muted webkit-playsinline></video>
                    <canvas id="canvas-signs" class="camera-canvas"></canvas>

                    <!-- Indicadores de estado -->
                    <div class="status-indicators">
                        <div id="indicator-hands" class="indicator inactive">
                            <span class="indicator-dot"></span>
                            <span class="indicator-text">Manos detectadas</span>
                        </div>
                        <div id="indicator-gesture" class="indicator inactive">
                            <span class="indicator-dot"></span>
                            <span class="indicator-text">Gesto reconocido</span>
                        </div>
                    </div>
                </div>

                <!-- Salida del texto reconocido -->
                <div class="output-container">
                    <p class="output-label">MENSAJE DETECTADO:</p>
                    <div id="output-text" class="output-text">Esperando se√±as...</div>
                </div>

                <!-- Controles del modo Se√±as -->
                <div class="controls-group">
                    <button id="btn-speak" class="btn btn-primary" disabled>REPRODUCIR AUDIO</button>
                    <button id="btn-clear-signs" class="btn btn-secondary">LIMPIAR</button>
                </div>

                <!-- Controles de la c√°mara -->
                <div class="camera-controls">
                    <button id="btn-start-camera" class="btn btn-primary">INICIAR C√ÅMARA</button>
                    <button id="btn-stop-camera" class="btn btn-danger hidden">DETENER C√ÅMARA</button>
                    <select id="select-camera" class="select-camera"></select>
                </div>

                <!-- Panel de Entrenamiento (opcional, para Fase 2) -->
                <div id="training-panel" class="training-panel hidden">
                    <h3>Entrenamiento del Modelo</h3>
                    <p>Graba ejemplos de se√±as para entrenar al modelo.</p>
                    <div class="input-group">
                        <input type="text" id="input-sign-name" placeholder="Nombre de la se√±a (ej: A)">
                        <button id="btn-record-sample" class="btn btn-primary">Grabar Muestra</button>
                    </div>
                </div>
            </section>

            <!-- Separador visual -->
            <div class="panel-separator"></div>

            <!-- Panel derecho: Modo Voz (Persona oyente comunica) -->
            <section class="panel panel-voice" id="panel-voice">
                <div class="panel-header">
                    <h2>üé§ Voz ‚Üí Texto</h2>
                    <p class="panel-subtitle">EL OYENTE HABLA Y EL TEXTO APARECE EN PANTALLA</p>
                </div>

                <!-- √Årea de visualizaci√≥n del texto por voz -->
                <div id="voice-text-container" class="voice-text-container">
                    <p id="voice-text">Presion√° el bot√≥n y habl√°...</p>
                </div>

                <!-- Indicador de grabaci√≥n -->
                <div id="recording-indicator" class="recording-indicator hidden">
                    <div class="recording-dot"></div>
                    <span>Grabando...</span>
                </div>

                <!-- Controles del modo Voz -->
                <div class="controls-group">
                    <button id="btn-start-voice" class="btn btn-success">COMENZAR A ESCUCHAR</button>
                    <button id="btn-stop-voice" class="btn btn-danger hidden">DETENER</button>
                    <button id="btn-clear-voice" class="btn btn-secondary">LIMPIAR TEXTO</button>
                </div>

                <!-- Historial de conversaci√≥n -->
                <div class="history-container-wrapper">
                    <h3>Historial de Conversaci√≥n:</h3>
                    <div id="history-container" class="history-container"></div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal de Instrucciones -->
    <div id="modal-instructions" class="modal hidden">
        <div class="modal-content">
            <span id="btn-close-modal" class="close-button">&times;</span>
            <h2>¬°Bienvenido a Se√±as Connect!</h2>
            <p>Esta aplicaci√≥n facilita la comunicaci√≥n entre personas sordas y oyentes.</p>
            
            <h3>C√≥mo funciona:</h3>
            <ul>
                <li><strong>Lengua de Se√±as a Voz:</strong> Inicia la c√°mara, haz una se√±a y la app la traducir√° a texto y audio.</li>
                <li><strong>Voz a Texto:</strong> Presiona "Comenzar a Escuchar", habla y la app mostrar√° el texto en pantalla.</li>
            </ul>

            <h3>Atajos de Teclado:</h3>
            <ul>
                <li><strong>Alt + C:</strong> Activar/Desactivar alto contraste.</li>
                <li><strong>Alt + F:</strong> Cambiar tama√±o de fuente.</li>
                <li><strong>Alt + Enter:</strong> Activar/Desactivar pantalla completa.</li>
            </ul>
            <button id="btn-modal-got-it" class="btn btn-primary">Entendido</button>
        </div>
    </div>


    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.min.js" crossorigin="anonymous"></script>

    <script src="js/config.js"></script>
    <script src="js/static-sign-dictionary.js"></script>
    <script src="js/speech-services.js"></script>
    <script src="js/hand-detector.js"></script>
    <script src="js/accessibility.js"></script>
    <script src="js/app.js"></script>

</body>
</html>